<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Yaaf.AdvancedBuilding
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Yaaf.AdvancedBuilding provides several build scripts for you to use.">
    <meta name="author" content="Matthias Dittrich">

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="https://matthid.github.io/Yaaf.AdvancedBuilding/content/style.css" />
    <link type="text/css" rel="stylesheet" href="https://matthid.github.io/Yaaf.AdvancedBuilding/content/prism.css" />
    <script type="text/javascript" src="https://matthid.github.io/Yaaf.AdvancedBuilding/content/tips.js"></script>
    <script type="text/javascript" src="https://matthid.github.io/Yaaf.AdvancedBuilding/content/prism.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://tpetricek.github.io/FSharp.Formatting/"><img height="16" width="16" src="https://matthid.github.io/Yaaf.AdvancedBuilding/content/img/FSharp.Formatting.png" /> F# Formatting</a></li>
        </ul>
        <h3 class="muted"><a href="https://matthid.github.io/Yaaf.AdvancedBuilding/index.html">Yaaf.AdvancedBuilding</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<!-- GENERATED FROM COMMIT: 44cee7fa7a10f4b958cff7318f103cc6493be885 -->
<h1><a name="Yaaf-AdvancedBuilding" class="anchor" href="#Yaaf-AdvancedBuilding">Yaaf.AdvancedBuilding</a></h1>

<h2><a name="Documentation" class="anchor" href="#Documentation"><a href="https://matthid.github.io/Yaaf.AdvancedBuilding/">Documentation</a></a></h2>

<p><a href="https://gitter.im/matthid/Yaaf?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/matthid/Yaaf" /></a></p>

<h2><a name="Build-status" class="anchor" href="#Build-status">Build status</a></h2>

<p><strong>Development Branch</strong></p>

<p><a href="https://travis-ci.org/matthid/Yaaf.AdvancedBuilding"><img src="https://travis-ci.org/matthid/Yaaf.AdvancedBuilding.svg?branch=develop" alt="Build Status" /></a>
<a href="https://ci.appveyor.com/project/matthid/yaaf-511/branch/develop"><img src="https://ci.appveyor.com/api/projects/status/2xitdogybhrpd74o/branch/develop?svg=true" alt="Build status" /></a></p>

<p><strong>Master Branch</strong></p>

<p><a href="https://travis-ci.org/matthid/Yaaf.AdvancedBuilding"><img src="https://travis-ci.org/matthid/Yaaf.AdvancedBuilding.svg?branch=master" alt="Build Status" /></a>
<a href="https://ci.appveyor.com/project/matthid/yaaf-511/branch/master"><img src="https://ci.appveyor.com/api/projects/status/2xitdogybhrpd74o/branch/master?svg=true" alt="Build status" /></a></p>

<h2><a name="NuGet" class="anchor" href="#NuGet">NuGet</a></h2>

<div class="row">
  <div class="span1"></div>
  <div class="span6">
    <div class="well well-small" id="nuget">
      The Yaaf.AdvancedBuilding library can be <a href="https://nuget.org/packages/Yaaf.AdvancedBuilding">installed from NuGet</a>:
      <pre>PM> Install-Package Yaaf.AdvancedBuilding</pre>
    </div>
  </div>
  <div class="span1"></div>
</div>

<h2><a name="Why-AdvancedBuilding" class="anchor" href="#Why-AdvancedBuilding">Why AdvancedBuilding?</a></h2>

<p>After setting up some projects with FAKE and Paket I often find the need to edit the <code>build.fsx</code> and add new features.
And most of the time after adding a feature I wanted that feature on other projects as well.</p>

<p>Because of this I introduced Yaaf.AdvancedBuilding, a nuget package containing a general FAKE build script, which can be configured.
Whenever I introduce a new feature into the build script I only need to update Yaaf.AdvancedBuilding to be able to use it.</p>

<p>Another pain point is building for multiple targets... 
The default FAKE targets defined in Yaaf.AdvancedBuilding can handle multiple targets.
Basically we use the solution platform configuration to define multiple platforms/targets.
This makes the build completely executable with xbuild/msbuild and lets you configure everything in
the project files (Visual Studio) itself. 
This way you can change the platform from within Visual Studio without the need to load another solution or to restart Visual Studio. 
You can find an example here: <a href="https://github.com/matthid/Yaaf.FSharp.Helper/blob/develop/src/source/Yaaf.FSharp.Helper/Yaaf.FSharp.Helper.fsproj">https://github.com/matthid/Yaaf.FSharp.Helper/blob/develop/src/source/Yaaf.FSharp.Helper/Yaaf.FSharp.Helper.fsproj</a></p>

<p>Features / Design goals:</p>

<ul>
<li>Your build can be updated (with <code>paket update</code>).</li>
<li>Extendible with your own FAKE targets / dependencies (as without Yaaf.AdvancedBuilding).</li>
<li>Additional support for building projects for multiple targets (net40, net45 and portable profiles)</li>
<li>Simplifies your paket.dependencies file by simplifying all build dependencies to just Yaaf.AdvancedBuilding.</li>
</ul>

<h2><a name="Quick-intro" class="anchor" href="#Quick-intro">Quick intro</a></h2>

<p>This project can be used to simplify the build process by replacing your build scripts with this nuget package.
It should especially help/simplify the process of building projects for multiple targets (net40, net45 and portable profiles).</p>

<p>The setup for this is not trivial and having an idea of FAKE (<a href="http://fsharp.github.com/FAKE)">http://fsharp.github.com/FAKE)</a> and paket (<a href="http://fsprojects.github.io/Paket/)">http://fsprojects.github.io/Paket/)</a> helps.
We assume in this quick intro guide that you are able to setup a simple project with FAKE (without ProjectScaffold).</p>

<p>We also assume that you have a project named <code>Yaaf.Project</code> already setup with <code>FAKE</code> and <code>Paket</code> with the following folder structure:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">-</span> <span class="o">.</span><span class="i">paket</span> (<span class="i">paket</span> <span class="i">folder</span>)
<span class="o">-</span> <span class="i">src</span>
  <span class="o">-</span> <span class="i">test</span> (<span class="i">Directory</span> <span class="k">for</span> <span class="i">test</span> <span class="i">projects</span>)
    <span class="o">-</span> <span class="i">Test</span><span class="o">.</span><span class="i">Yaaf</span><span class="o">.</span><span class="i">Project</span> (<span class="i">test</span> <span class="i">projects</span> <span class="i">start</span> <span class="k">with</span> <span class="s">&quot;Test.&quot;</span> <span class="k">and</span> <span class="i">produce</span> <span class="i">equally</span> <span class="i">named</span> <span class="s">&quot;.dll&quot;</span> <span class="i">files</span>)
  <span class="o">-</span> <span class="i">source</span> (<span class="i">Directory</span> <span class="k">for</span> <span class="i">source</span> <span class="i">projects</span>)
  <span class="o">-</span> <span class="i">Yaaf</span><span class="o">.</span><span class="i">Project</span><span class="o">.</span><span class="i">sln</span>
<span class="o">-</span> <span class="i">build</span><span class="o">.</span><span class="i">cmd</span>
<span class="o">-</span> <span class="i">build</span><span class="o">.</span><span class="i">sh</span>
<span class="o">-</span> <span class="i">build</span><span class="o">.</span><span class="i">fsx</span>
<span class="o">-</span> <span class="i">paket</span><span class="o">.</span><span class="i">dependencies</span>
</code></pre></td>
</tr>
</table>

<blockquote>
  <p>Note other layouts are possible but this is the recommended layout which requires a minimal configuration later on.
Paket is also not strictly required! You can get away with a <code>packages.config</code> nuget file and have your dependencies there.</p>
</blockquote>

<h3><a name="Getting-Yaaf-AdvancedBuilding" class="anchor" href="#Getting-Yaaf-AdvancedBuilding">Getting Yaaf.AdvancedBuilding</a></h3>

<p>Now we first add Yaaf.AdvancedBuilding to our dependencies</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">source</span> <span class="i">https</span><span class="o">:</span><span class="c">//nuget.org/api/v2</span>

<span class="i">nuget</span> <span class="i">Yaaf</span><span class="o">.</span><span class="i">AdvancedBuilding</span>
</code></pre></td>
</tr>
</table>

<blockquote>
  <p>You can basically remove all other build dependencies now and only keep Yaaf.AdvancedBuilding,
because Yaaf.AdvancedBuilding will itself depend on all things it needs, and paket will install all of them.
Paket's <code>internalize</code> feature isn't supported! If you have your own additional build dependencies you need to add them.</p>
</blockquote>

<p>Now we update our dependencies:</p>

<pre class="line-numbers language-bash"><code class="language-bash">.paket/paket.exe update
</code></pre>

<blockquote>
  <p>Note when using NuGet you now need to manually download and extract Yaaf.AdvancedBuilding to <code>./packages/Yaaf.AdvancedBuilding</code>.
You also need to specify all dependencies in <code>packages.config</code> instead of only Yaaf.AdvancedBuilding.</p>
</blockquote>

<h3><a name="Setting-up-Yaaf-AdvancedBuilding" class="anchor" href="#Setting-up-Yaaf-AdvancedBuilding">Setting up Yaaf.AdvancedBuilding</a></h3>

<blockquote>
  <p>Note we assume you are using any kind of VCS system, because we will REPLACE some files and then tell you to look into their old versions later on!
please commit/backup any unsaved changes now (excluding the changes from above)!</p>
</blockquote>

<p>Now you can start setting up the project with:</p>

<pre class="line-numbers language-bash"><code class="language-bash"># delegating build scripts
cp -r packages/Yaaf.AdvancedBuilding/scaffold/build/* ./
# Some initial files for your repro 
#(not required if you already have CONTRIBUTING.md, README.md and so forth in place)
# includes a .travis.yml and appveyor.yml for Travis and AppVeyor support
cp -r packages/Yaaf.AdvancedBuilding/scaffold/initial/* ./
# required if you want support for nuget in your project files 
# (not required if you use paket only)
cp -r packages/Yaaf.AdvancedBuilding/scaffold/nuget/* ./
# Some content files for the documentation
cp -r packages/Yaaf.AdvancedBuilding/scaffold/content/* ./
# copies some templates for the documentation
cp -r packages/Yaaf.AdvancedBuilding/scaffold/templates/* ./

# copies an build configuration to your project root
cp packages/Yaaf.AdvancedBuilding/examples/buildConfig/buildConfig.Yaaf.AdvancedBuilding.fsx ./buildConfig.fsx
</code></pre>

<h3><a name="Setting-up-the-file" class="anchor" href="#Setting-up-the-file">Setting up the <code>buildConfig.fsx</code> file</a></h3>

<p>Now you need to setup the <code>buildConfig.fsx</code> file! 
Most settings can be taken from your old <code>build.fsx</code> file (which was overwritten above).
This step is documented in an extra documentation page: <a href="https://matthid.github.io/Yaaf.AdvancedBuilding/buildConfig.html">https://matthid.github.io/Yaaf.AdvancedBuilding/buildConfig.html</a></p>

<h2><a name="Disclaimer" class="anchor" href="#Disclaimer">Disclaimer</a></h2>

<p>I use this project for various projects to build (Basically for all of my projects including <a href="https://github.com/Antaris/RazorEngine).
This">https://github.com/Antaris/RazorEngine).
This</a> means the core features are quite stable while updating.
However I often use this project to add new (build-)features as kind of a <code>playground</code> project 
and when they are not as useful as initially thought they will be removed.
Just join the chat or open an issue if your scripts broke (without any hint in the release notes).</p>


        </div>
        <div class="span3">
          <a href="https://matthid.github.io/Yaaf.AdvancedBuilding/index.html">
            <img src="https://matthid.github.io/Yaaf.AdvancedBuilding/content/img/logo.png" style="width:140px;height:140px;margin:10px 0px 0px 35px;border-style:none;" />
          </a>

          <ul class="nav nav-list" id="menu">

            <li class="nav-header">Yaaf.AdvancedBuilding</li>

            <li class="divider"></li>
            <li><a href="https://www.nuget.org/packages/Yaaf.AdvancedBuilding/">Get Yaaf.AdvancedBuilding package via NuGet</a></li>
            <li><a href="https://github.com/matthid/Yaaf.AdvancedBuilding">Source Code</a></li>
            <li><a href="https://github.com/matthid/Yaaf.AdvancedBuilding/issues">Open bugs and feature requests</a></li>
            <li><a href="https://github.com/matthid/Yaaf.AdvancedBuilding/issues/new">Report Issue or Request Feature</a></li>
            <li><a href="https://github.com/matthid/Yaaf.AdvancedBuilding/blob/develop/LICENSE.md">License (Apache 2)</a></li>
            <li><a href="https://matthid.github.io/Yaaf.AdvancedBuilding/Contributing.html">Contributing</a></li>
            
            <li class="nav-header">Documentation</li>
              
            <li><a href="https://matthid.github.io/Yaaf.AdvancedBuilding/index.html">Quick Intro</a></li>
            <li><a href="https://matthid.github.io/Yaaf.AdvancedBuilding/ReleaseNotes.html">Release Notes</a></li>
            <li><a href="https://matthid.github.io/Yaaf.AdvancedBuilding/DevelopReadme.html">Development Intro</a></li>
            <li><a href="https://matthid.github.io/Yaaf.AdvancedBuilding/buildConfig.html">An example build configuration</a></li>

            <li class="nav-header">Reference</li>
              
            <li><a href="https://matthid.github.io/Yaaf.AdvancedBuilding/references/index.html">API Reference</a></li>

          </ul>
        </div>
      </div>
    </div>
      <a href="https://github.com/matthid/Yaaf.AdvancedBuilding"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
    </body>
  </html>
